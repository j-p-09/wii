<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domaƒçe Olimpijske Igre 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --gold: #ffd700;
            --silver: #c0c0c0;
            --bronze: #cd7f32;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .nav-link {
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: #38bdf8;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-link:hover::after {
            width: 80%;
        }

        .btn-grad {
            background: linear-gradient(to right, #38bdf8, #818cf8);
            transition: transform 0.2s;
        }

        .btn-grad:hover {
            transform: scale(1.05);
        }

        input, select {
            background: rgba(255, 255, 255, 0.05) !important;
            border: 1px solid var(--glass-border) !important;
            color: white !important;
            border-radius: 10px;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .medal-icon { width: 24px; height: 24px; display: inline-block; border-radius: 50%; }
    </style>
</head>
<body class="p-4 md:p-8">

    <nav class="fixed top-6 left-1/2 -translate-x-1/2 z-50 w-[90%] max-w-4xl">
        <div class="glass-card px-6 py-4 flex justify-between items-center">
            <div class="font-bold text-xl tracking-tighter">DOMAƒåE<span class="text-sky-400">IGRE</span></div>
            <div class="hidden md:flex gap-8 font-medium">
                <a href="#" onclick="showTab('medalje')" class="nav-link">MEDALJE</a>
                <a href="#" onclick="showTab('kategorije')" class="nav-link">KATEGORIJE</a>
                <a href="#" onclick="showTab('sestevak')" class="nav-link">SE≈†TEVEK</a>
                <a href="#" onclick="showTab('prijava')" class="nav-link text-sky-400">PRIJAVA</a>
            </div>
            <button class="md:hidden">‚ò∞</button>
        </div>
    </nav>

    <main class="mt-32 max-w-6xl mx-auto">
        
        <section id="medalje" class="tab-content active">
            <h1 class="text-4xl font-extrabold mb-8 text-center">Tabela <span class="text-sky-400">Medalj</span></h1>
            <div class="glass-card overflow-hidden">
                <table class="w-full text-left">
                    <thead class="bg-white/5">
                        <tr>
                            <th class="p-4">Dr≈æava</th>
                            <th class="p-4 text-center">
                                <div class="flex justify-center gap-1">
                                    <span class="medal-icon" style="background: var(--gold)"></span>
                                    <span class="medal-icon" style="background: var(--silver)"></span>
                                    <span class="medal-icon" style="background: var(--bronze)"></span>
                                </div>
                                Skupno
                            </th>
                            <th class="p-4 text-center text-yellow-400">Zlato</th>
                            <th class="p-4 text-center text-slate-300">Srebro</th>
                            <th class="p-4 text-center text-orange-400">Bron</th>
                        </tr>
                    </thead>
                    <tbody id="medalTableBody">
                        </tbody>
                </table>
            </div>
        </section>

        <section id="kategorije" class="tab-content">
            <h1 class="text-4xl font-extrabold mb-8 text-center">Rezultati po <span class="text-sky-400">Kategorijah</span></h1>
            <div class="flex justify-center mb-6">
                <select id="publicCatSelect" onchange="renderPublicResults()" class="p-3 w-64 glass-card"></select>
            </div>
            <div id="categoryResultsArea" class="glass-card p-6">
                </div>
        </section>

        <section id="sestevak" class="tab-content">
            <h1 class="text-4xl font-extrabold mb-4 text-center">Toƒçkovni <span class="text-sky-400">Se≈°tevek</span></h1>
            <div class="flex justify-center gap-4 mb-8">
                <button onclick="renderTotal('vse')" class="px-6 py-2 glass-card hover:bg-white/10">Skupno</button>
                <button onclick="renderTotal('notranje')" class="px-6 py-2 glass-card hover:bg-white/10">Notranje</button>
                <button onclick="renderTotal('zunanje')" class="px-6 py-2 glass-card hover:bg-white/10">Zunanje</button>
            </div>
            <div id="totalPointsArea" class="glass-card p-6"></div>
        </section>

        <section id="prijava" class="tab-content">
            <div class="max-w-md mx-auto glass-card p-10 mt-20">
                <h2 class="text-2xl font-bold mb-6 text-center">Admin Prijava</h2>
                <div class="space-y-4">
                    <input type="text" id="adminUser" placeholder="Uporabni≈°ko ime" class="w-full p-3 outline-none">
                    <input type="password" id="adminPass" placeholder="Geslo" class="w-full p-3 outline-none">
                    <button onclick="login()" class="w-full py-3 btn-grad rounded-xl font-bold uppercase tracking-wider">Vstop v nadzorno plo≈°ƒço</button>
                </div>
            </div>
        </section>

        <section id="adminPanel" class="tab-content">
            <div class="flex flex-col md:flex-row gap-6">
                <aside class="w-full md:w-64 glass-card p-4 h-fit">
                    <nav class="flex flex-col gap-2">
                        <button onclick="showAdminSub('a-kat')" class="text-left p-3 hover:bg-white/5 rounded-lg">‚öôÔ∏è Kategorije</button>
                        <button onclick="showAdminSub('a-vpis')" class="text-left p-3 hover:bg-white/5 rounded-lg">‚úçÔ∏è Vpis rezultatov</button>
                        <button onclick="showAdminSub('a-plan')" class="text-left p-3 hover:bg-white/5 rounded-lg">üìÖ Naƒçrtovanje</button>
                        <button onclick="showAdminSub('a-tek')" class="text-left p-3 hover:bg-white/5 rounded-lg">üèÉ Tekmovalci</button>
                        <button onclick="logout()" class="text-left p-3 text-red-400 mt-4">Odjava</button>
                    </nav>
                </aside>

                <div class="flex-1 glass-card p-6">
                    <div id="a-kat" class="admin-sub hidden">
                        <h3 class="text-xl font-bold mb-4">Urejanje Kategorij</h3>
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <input type="text" id="catName" placeholder="Ime kategorije (npr. Met sekire)">
                            <select id="catType"><option value="zunanje">Zunanje</option><option value="notranje">Notranje</option></select>
                            <input type="text" id="catUnit" placeholder="Enota (s, m, kg)">
                            <select id="catBetter"><option value="min">Manj je bolje (ƒças)</option><option value="max">Veƒç je bolje (daljava)</option></select>
                            <input type="number" id="catSeries" placeholder="≈†tevilo serij">
                            <input type="number" id="catAttempts" placeholder="Poskusov v seriji">
                        </div>
                        <button onclick="addCategory()" class="px-6 py-2 btn-grad rounded-lg">Dodaj Kategorijo</button>
                        <div id="adminCatList" class="mt-8 space-y-2"></div>
                    </div>

                    <div id="a-vpis" class="admin-sub hidden">
                        <h3 class="text-xl font-bold mb-4">Vpis Rezultatov</h3>
                        <select id="vpisCatSelect" class="w-full p-2 mb-4"></select>
                        <div id="vpisFormArea"></div>
                    </div>

                    <div id="a-tek" class="admin-sub hidden">
                        <h3 class="text-xl font-bold mb-4">Dr≈æave in Tekmovalci</h3>
                        <div class="flex gap-2 mb-6">
                            <input type="text" id="countryName" placeholder="Ime dr≈æave" class="flex-1">
                            <input type="text" id="countryFlag" placeholder="Emoji zastave (npr. üá∏üáÆ)" class="w-20">
                            <button onclick="addCountry()" class="px-4 py-2 bg-green-600 rounded-lg">Dodaj</button>
                        </div>
                        <div id="countryList" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- DATA STRUCTURE & LOCAL STORAGE ---
        let db = JSON.parse(localStorage.getItem('olympics_db')) || {
            countries: [], // {id, name, flag, participants: []}
            categories: [], // {id, name, type, unit, better, series, attempts}
            results: [], // {catId, date, scores: {participantId: [[serija1], [serija2]]}}
            schedule: []
        };

        function save() {
            localStorage.setItem('olympics_db', JSON.stringify(db));
            renderAll();
        }

        // --- NAVIGATION ---
        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function showAdminSub(id) {
            document.querySelectorAll('.admin-sub').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        // --- AUTH ---
        function login() {
            if(document.getElementById('adminUser').value === 'ADMIN' && document.getElementById('adminPass').value === '1234') {
                showTab('adminPanel');
                showAdminSub('a-kat');
            } else { alert('Napaƒçni podatki!'); }
        }

        function logout() { showTab('prijava'); }

        // --- ADMIN: COUNTRIES & ATHLETES ---
        function addCountry() {
            const name = document.getElementById('countryName').value;
            const flag = document.getElementById('countryFlag').value;
            if(!name) return;
            db.countries.push({ id: Date.now(), name, flag, participants: [] });
            save();
        }

        function addParticipant(countryId) {
            const pName = prompt("Ime tekmovalca:");
            if(!pName) return;
            const country = db.countries.find(c => c.id === countryId);
            country.participants.push({ id: Date.now(), name: pName });
            save();
        }

        // --- ADMIN: CATEGORIES ---
        function addCategory() {
            const cat = {
                id: Date.now(),
                name: document.getElementById('catName').value,
                type: document.getElementById('catType').value,
                unit: document.getElementById('catUnit').value,
                better: document.getElementById('catBetter').value,
                series: parseInt(document.getElementById('catSeries').value),
                attempts: parseInt(document.getElementById('catAttempts').value)
            };
            db.categories.push(cat);
            save();
        }

        // --- LOGIC: CALCULATION ---
        function calculatePoints(rank) {
            if (rank === 1) return 100;
            if (rank === 2) return 80;
            if (rank === 3) return 60;
            if (rank === 4) return 40;
            if (rank === 5) return 35;
            if (rank > 5) return Math.max(0, 35 - (rank - 5) * 0.02);
            return 0;
        }

        // --- RENDERING ---
        function renderAll() {
            renderMedals();
            renderAdminCats();
            renderCountryList();
            updateSelects();
        }

        function updateSelects() {
            const pSel = document.getElementById('publicCatSelect');
            const vSel = document.getElementById('vpisCatSelect');
            const options = db.categories.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
            pSel.innerHTML = vSel.innerHTML = options;
        }

        function renderCountryList() {
            const container = document.getElementById('countryList');
            container.innerHTML = db.countries.map(c => `
                <div class="p-4 bg-white/5 rounded-xl border border-white/10">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-xl">${c.flag} ${c.name}</span>
                        <button onclick="addParticipant(${c.id})" class="text-xs bg-sky-500/20 p-1 px-2 rounded">+ Tekmovalec</button>
                    </div>
                    <div class="text-sm text-gray-400">
                        ${c.participants.map(p => p.name).join(', ')}
                    </div>
                </div>
            `).join('');
        }

        function renderAdminCats() {
            document.getElementById('adminCatList').innerHTML = db.categories.map(c => `
                <div class="p-2 bg-white/5 rounded flex justify-between">
                    <span>${c.name} (${c.type})</span>
                    <button class="text-red-400" onclick="db.categories = db.categories.filter(x=>x.id!==${c.id}); save();">Bri≈°i</button>
                </div>
            `).join('');
        }

        function renderMedals() {
            // Logika za medalje bi ≈°la ƒçez vse rezultate in pre≈°tela 1., 2., 3. mesta
            // Tukaj je placeholder za vizualizacijo
            const tbody = document.getElementById('medalTableBody');
            tbody.innerHTML = db.countries.map(c => `
                <tr class="border-t border-white/5 hover:bg-white/5 transition">
                    <td class="p-4 flex items-center gap-3"><span class="text-2xl">${c.flag}</span> ${c.name}</td>
                    <td class="p-4 text-center font-bold">0</td>
                    <td class="p-4 text-center">0</td>
                    <td class="p-4 text-center">0</td>
                    <td class="p-4 text-center">0</td>
                </tr>
            `).join('');
        }

        // Zaƒçetni render
        renderAll();
    </script>
</body>
</html>
